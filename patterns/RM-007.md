# RM-007: Object cleanup and reinitialization

**Risk**: Incomplete initialization

**When to check**: Mandatory when objects are freed, torn down or unregistered

Place each step defined below into TodoWrite.

**Mandatory cleanup and reinit validation:**
- step 1: read full function definition
  - Add name to TodoWrite
  - Output: function name, and a random line from anywhere in the definition
    - you must prove you read the function
- step 2: Find and use MULTI_POINTER_MEMORY_TRACKING from CS-001
- step 3: check all cleanup paths in modified functions, even if they didn't change
  - Add every cleanup path to TodoWrite
  - Output: path name and location
- step 4: if objects not freed but returned to pool/global, check all fields reinitialized on reuse
- step 5: when freeing/destroying resources referenced by structure fields, ensure pointer fields are set to NULL to prevent use-after-free on reuse
  - ex: unregister_foo() { foo->dead = 1; free(foo->ptr); add to list}
        register_foo() { pull from list ; skip allocation of foo->ptr; foo->ptr->use_after_free;}
- Assume [kv]free(); [kv]malloc(); APIs handle this properly unless you find proof initialization is skipped

**After analysis:** Issues found: [none OR list]

**Note**: For checking if callees initialize variables, see CS-001
