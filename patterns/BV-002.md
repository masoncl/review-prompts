# BV-002: Integer overflow/underflow/truncation before use

**Risk**: Buffer overflow/logic error

**When to check**: Mandatory when integer arithmetic or type conversions occur

**Pattern-specific TodoWrite fields**:
- LHS type: [type] from [file:line of declaration]
- RHS type: [type] from [file:line of definition]
- Trace: [full chain: field->struct->declaration]
- Truncation: [YES/NO] If YES [impact]

**Mandatory integer safety validation:**
- read full function definition
- watch for implicit type conversions when assigning to smaller types (u64 → u32, u32 → u16, etc.)
- check 16/32-bit arithmetic before array access or calculations
- check every assignment for truncation issues, tracing types of both sides
- don't worry about casts between u32 -> int
- if you think a variable can overflow over time, make sure the period of time required is a practical concern
- add every integer assignment in modified functions to TodoWrite with type definitions of both sides, even if they didn't change

**Mandatory Self-verification gate:**

**Pattern-specific questions**:
  1. How many integer assignments did you find? [number]
  2. How many assignments have type mismatches? [number]
  3. Have you traced BOTH sides of EVERY assignment to their source definitions? [yes/no]

If you cannot answer ALL questions with evidence, RESTART BV-002 from the beginning.
