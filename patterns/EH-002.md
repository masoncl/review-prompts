# EH-002: ERR_PTR vs NULL consistency

**Risk**: Wrong error check

**When to check:** Mandatory when NULLs, ERR_PTRs, PTR_ERRs are checked or returned

**Note:**
- ERR_PTR() holds an error cast to a pointer, but they are not valid pointers
  - foo = ERR_PTR(-ENOMEM) ; if (foo) -> TRUE, but *foo will CRASH

Place each step defined below into TodoWrite.

**Mandatory error check validation:**
- step 1: read entire function
  - Add function to TodoWrite
  - Output: function name, and a random line from anywhere in the definition
    - you must prove you read the function
- step 2: Add every comparison with NULL, ERR_PTR, PTR_ERR, IS_ERR_PTR to TodoWrite
  - Output: quote the actual comparison code and its location
- step 3: never mix IS_ERR with NULL checks
- step 4: never dereference the result of ERR_PTR()
- step 5: if ERR_PTR or NULL returns are added or modified, ensure all callers handle correctly
- step 6: ensure IS_ERR/NULL is consistent with all returns or checks

**After analysis:** Issues found: [none OR list]
