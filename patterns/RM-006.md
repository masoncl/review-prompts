# RM-006: Function resource contracts

**When to check**: mandatory for all function calls with arguments

**Risk**: memory leaks, abandoned resources

Place each step defined below into TodoWrite.

**Mandatory resource contract validation:**
- step 1: read full function definition
  - Add function name to TodoWrite
  - Output: function name, and a random line from anywhere in the definition
    - you must prove you read the function
- step 2: check all resources and return paths in modified functions, even if they didn't change
  - Output: resource name, return path location
- step 3: trace EVERY return path - what happens to the original resource?
  - Output: for each return path, show "path@location: resource X is [freed/returned/leaked/etc]"
- step 4: if function returns different resource, prove original is properly handled
  - Output: quote the code that handles the original resource
- step 5: check lock state, reference counts, and ownership of original resource
  - Output: resource state at each return (e.g., "locked/unlocked, refcount +1/-1")
- step 6: look for assignment patterns like "original = new" that may abandon original
  - Output: list any abandonment patterns found or "none found"

**After analysis:** Issues found: [none OR list]

**Note**: For caller expectation verification, see CS-001
