# EH-003: Error value preservation

**Risk**: Lost errors

**When to check:** Mandatory when error values overwritten before action taken

**Pattern-specific TodoWrite fields**:
- Variable: [name]
- Pattern: [ret = func(); ... ret = 0; OR loop accumulation]
- Loop scenarios (if applicable): Iteration trace [describe], Scenario [fail,fail] [matches last? YES/NO], Scenario [fail,success] [cleared? YES/NO], Scenario [success,fail] [overwritten? YES/NO]
- Similar patterns in codebase: [comparison]
- Impact: [error lost/preserved correctly]

**Mandatory error preservation validation:**
- read entire function, track every error value overwrite in modified functions in TodoWrite, even if they didn't change
- watch for `ret = func(); ... ret = 0;` patterns
- when loops accumulate errors:
  - trace at least 2 concrete iteration scenarios
  - scenario 1: [fail, fail] - does final error match last failure?
  - scenario 2: [fail, success] - is error cleared on success?
  - scenario 3: [success, fail] - does success get overwritten?
  - compare to similar patterns in codebase for consistency
  - ask: Should partial success clear previous recoverable errors?

**Mandatory Self-verification gate:**

**Pattern-specific questions** (in addition to core questions):
  1. How many error value overwrites did you find? [number]
  2. Have you traced 2+ concrete iteration scenarios for EVERY loop? [yes/no]
  3. How many overwrites lose errors incorrectly? [number]

If you cannot answer ALL questions with evidence, RESTART EH-003 from the beginning.
