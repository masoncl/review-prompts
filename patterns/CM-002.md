# CM-002: Data format and return value changes

**Risk**: Logic error

**When to check:** Mandatory when data encoding or interpretation changes for a variable or structure

**Pattern-specific TodoWrite fields**:
- Variable/field: [name] - [type]
- Old encoding: [describe]
- New encoding: [describe]
- Modified function: [name at file:line]
- Callers/callees affected: [name at line] - [uses correctly? YES/NO]
- Consistency within function: [YES/NO + explanation]
- Cross-function consistency: [YES/NO + explanation]

**Mandatory data format validation:**
- read entire function, track all encoding changes in modified functions in TodoWrite, even if they didn't change
- when changing how data is encoded/interpreted within a function, verify consistency
- read entire function of any callers/callees if new data encoding is returned or passed down
  - add to TodoWrite
- verify new encodings used correctly in new location
  - read full definition of functions in new locations

**Mandatory Self-verification gate:**

**Pattern-specific questions** (in addition to core questions):
  1. How many data format/encoding changes did you find? [number]
  2. How many changes have affected callers/callees? [number]
  3. Have you verified consistency within EVERY modified function? [yes/no]
  4. Have you read the full definition of EVERY affected caller/callee? [yes/no]

If you cannot answer ALL questions with evidence, RESTART CM-002 from the beginning.

**Note**: For cross-function data flow and consumer verification, see CS-003
