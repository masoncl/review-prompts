# MT-001: Math and rounding correctness

**Risk**: Data loss/logic error

**When to check:** Mandatory when numbers are shifted or rounded up or down

**Pattern-specific TodoWrite fields**:
- Operation type: [shift/round up/round down]
- Data being operated on: [variable/field] - [type]
- Data alignment: [aligned/unaligned to what boundary]
- Unaligned data handling: [data lost? YES/NO - explain]
- Loop control: [rounding cause early stop? YES/NO]
- Memory alignment: [checked? YES/NO]
- Size field alignment: [checked? YES/NO]
- Correct function used: [YES/NO - DIV_ROUND_UP vs >>]

**Mandatory math validation:**
- read entire function
- track every shift/rounding operation in modified functions in TodoWrite, even if they didn't change
- when shifting or rounding, ensure unaligned data not lost
- verify loop controls with rounding don't stop too soon
- check alignment of both memory AND size fields
- use DIV_ROUND_UP when needed, not size >> PAGE_SHIFT for rounding up

**Mandatory Self-verification gate:**

**Pattern-specific questions** (in addition to core questions):
  1. How many shift/rounding operations did you find? [number]
  2. How many operations have unaligned data that could be lost? [number]
  3. Have you checked memory AND size alignment for EVERY operation? [yes/no]
  4. Have you verified loop controls don't stop early for EVERY loop? [yes/no]

If you cannot answer ALL questions with evidence, RESTART MT-001 from the beginning.
