# CL-012: New concurrent access to shared resources

**Risk**: Race condition

**When to check**: Mandatory with any writes to shared resources

Place each step defined below into TodoWrite.

**Mandatory concurrent access validation:**
- step 1: read entire function
  - Add function to TodoWrite
  - Output: function name, and a random line from anywhere in the definition
    - you must prove you read the function
- step 2: identify all shared resources being written (state vars, timers, flags, etc.)
  - Add every shared resource to TodoWrite
  - Output: name and location
- step 3: use grep/semcode to find ALL other write sites for same resources
  - Add every write site into TodoWrite
  - Output: quote the actual write code and its location
- step 4: document execution context for each write site (Process/Workqueue/Softirq/Hardirq)
  - Output: execution context found
- step 5: check if new writes can race with existing writes:
  - Softirq can interrupt: process, workqueue
  - Hardirq can interrupt: everything
  - Workqueues can run concurrent with process context
- step 6: check for synchronization (locks, atomic ops, memory barriers)
  - Output: synchronization found

**After analysis:** Issues found: [none OR list]
